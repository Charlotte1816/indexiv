---
const url = Astro.url;
const segments = url.pathname.split('/').filter(Boolean);
const breadcrumbs = segments.map((segment,index) => {
    const href = '/' + segments.slice(0, index + 1).join('/');
    const label = segment;
    return { href, label };
});
---
<nav aria-label="Breadcrumb">
    <ol class="breadcrumb-list">
        {breadcrumbs.map((crumb, index) => (
            <li class="breadcrumb-item">
                {index === breadcrumbs.length - 1 ? (
                    <span aria-current="page">{crumb.label}</span>
                ) : (
                    <a href={crumb.href}>{crumb.label}</a>
                )}
                {index < breadcrumbs.length - 1 && <span class="breadcrumb-separator"><i class="fa-solid fa-chevron-right"></i></span>}
            </li>
        ))}
    </ol>
</nav>

<style>
    .breadcrumb-list {
        display: flex;
        flex-wrap: wrap;
        list-style: none;
        padding: 0.3rem 0.5rem;
        background-color: var(--metropolis);
        font-size: 0.8rem;
    }

    .breadcrumb-separator {
        margin-right: 0.2rem;
        color: var(--white);
    }

    .breadcrumb-item a {
        text-decoration: none;
        color: var(--white);
    }

    .breadcrumb-item span[aria-current="page"] {
        color: var(--white);
    }

    .breadcrumb-item a:hover {
        color: var(--accent-orange);
        text-decoration: underline;
    }
</style>