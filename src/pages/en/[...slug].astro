---
import { getCollection } from 'astro:content';
import BaseLayout from '../../components/BaseLayout.astro';

export async function getStaticPaths() {
    const entries = await getCollection('en');

    return entries.map(entry => ({
        params: {
            slug: entry.slug
        }
    }));
}

const { slug } = Astro.params;
const entries = await getCollection('en');
const entry = entries.find(e => e.slug === slug);

if (!entry) {
    throw new Error(`Article not found: ${slug}`);
}

const { Content } = await entry.render();
---
<BaseLayout lang="en" type="article" title={entry.data.title} description={entry.data.description}>
    <h1>{entry.data.title}</h1>
    <Content />
</BaseLayout>